# OpenClaw Family Chat ğŸŒŸ

A family-friendly WebChat interface for OpenClaw with integrated music search!

**Port**: 3010 (see [PORTS.md](https://github.com/vkolyvas/openclaw-family-chat/blob/main/PORTS.md) for all used ports)

## Features

- ğŸ“± **Mobile-friendly** - Works great on phones and tablets
- ğŸµ **Music Search** - YouTube Music integration via ytmusicapi
- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **Multi-user** - Family members can all chat
- ğŸ¤– **AI Powered** - Powered by OpenClaw with your configured agents
- ğŸ¨ **Customizable** - Easy to theme and extend

## Quick Start

### 1. Install Node.js Dependencies

```bash
cd openclaw-family-chat
npm install
```

### 2. Install Python Dependencies (for music)

```bash
pip install -r requirements.txt
```

### 3. Setup YouTube Music Authentication

**ytmusicapi** uses browser cookies instead of API keys:

```bash
# For Chrome
python setup_auth.py chrome

# For Firefox  
python setup_auth.py firefox
```

This will:
1. Open a browser to music.youtube.com
2. You log in normally
3. Script copies authentication cookies
4. Saves to `youtube_music_oauth.json`

### 4. Configure Environment

Create a `.env` file:

```env
# OpenClaw Gateway (optional - chat works without it)
GATEWAY_WS_URL=ws://127.0.0.1:18789
GATEWAY_TOKEN=your-token-here

# Server port
PORT=3010
```

**Note**: No API key needed! ytmusicapi uses browser authentication.

### 5. Start the Server

```bash
# Development (with auto-reload)
npm run dev

# Production
npm start
```

### 6. Open in Browser

```
http://localhost:3010
```

## Usage

### For Your Wife & Family

1. Open the URL on their phone/tablet
2. Enter their name
3. Start chatting naturally!

**Example conversations:**
- "Play some jazz music"
- "What's the weather?"
- "Tell me a joke"
- "Set a reminder for tomorrow"

### Music Search

1. Click ğŸµ in the header
2. Search for songs/artists
3. Click a result to open in YouTube Music

## Architecture

```
User's Browser
     â”‚
     â–¼ (WebSocket)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Family Chat    â”‚â—„â”€â”€ Express + WebSocket Server
â”‚  Server :3010   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ WebSocket (optional)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OpenClaw        â”‚
â”‚ Gateway :18789  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Python subprocess
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ytmusicapi      â”‚â—„â”€â”€ Browser cookie auth
â”‚ (Python)        â”‚     No API key needed!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Why ytmusicapi?

| YouTube Data API | ytmusicapi |
|------------------|------------|
| Needs API key setup | No API key needed |
| Returns videos + music | **Music-focused only** |
| Official Google API | Browser emulation |
| Limited music metadata | Full YouTube Music features |

## Files

```
openclaw-family-chat/
â”œâ”€â”€ server.js              # Node.js + Express server
â”œâ”€â”€ music_service.py       # Python ytmusicapi wrapper
â”œâ”€â”€ setup_auth.py          # OAuth setup script
â”œâ”€â”€ requirements.txt       # Python dependencies
â”œâ”€â”€ package.json           # Node.js dependencies
â”œâ”€â”€ .env.example           # Environment template
â”œâ”€â”€ public/                # Frontend files
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ app.js
â””â”€â”€ youtube_music_oauth.json  # Generated by setup_auth.py
```

## Available Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Chat interface |
| `/api/health` | GET | Server health check |
| `/api/music/search?q=` | GET | Search YouTube Music |
| `/api/music/test` | GET | Test ytmusicapi connection |

## Troubleshooting

### "Connection failed"
- Make sure the server is running: `npm start`
- Check the WebSocket URL in browser dev tools

### Music search not working
- Run: `python setup_auth.py chrome`
- Make sure you're logged into YouTube Music
- Check: `python music_service.py test`

### Can't connect to Gateway
- The chat works without Gateway connection
- To enable routing, start OpenClaw Gateway and configure `GATEWAY_WS_URL`

## Tech Stack

- **Backend**: Express.js (Node.js), ytmusicapi (Python)
- **Frontend**: Vanilla JS, CSS3 (no frameworks)
- **Integration**: OpenClaw Gateway, YouTube Music (browser auth)

## License

MIT - Have fun! ğŸ‰
